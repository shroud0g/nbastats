{% extends "index.html" %}

{% block title %}Game{% endblock %}

{% block game %}

<div class="container-fluid" style="overflow: hidden; display: block; max-width: 88rem">

    <!--Glossary-->
    <div class="collapse" id="glossary">
        <div class="card card-body" style=" font-size: 12px;">
            <dl class="row">
                <div class="col">
                    <dt>GP</dt>  <dd>Games Played</dd>
                    <dt>MIN</dt>  <dd>Minutes Played</dd>
                    <dt>FGM</dt>  <dd>Field Goals Made</dd>
                    <dt>FGA</dt>  <dd>Field Goals Attempted</dd>
                    <dt>FG%</dt>  <dd>Field Goal Percentage</dd>
                </div>
                <div class="col">
                    <dt>3PM</dt>  <dd>3 Point Field Goals Made</dd>
                    <dt>3PA</dt>  <dd>3 Point Field Goals Attempted</dd>
                    <dt>3P%</dt>  <dd>3 Point Field Goals Percentage</dd>
                    <dt>FTM</dt>  <dd>Free Throws Made</dd>
                    <dt>FTA</dt>  <dd>Free Throws Attempted</dd>
                </div>
                <div class="col">
                    <dt>FT%</dt>  <dd>Free Throw Percentage</dd>
                    <dt>OREB</dt>  <dd>Offensive Rebounds</dd>
                    <dt>DREB</dt>  <dd>Defensive Rebounds</dd>
                    <dt>REB</dt>  <dd>Rebounds</dd>
                    <dt>AST</dt>  <dd>Assists</dd>
                </div>
                <div class="col">
                    <dt>TOV</dt>  <dd>Turnovers</dd>
                    <dt>STL</dt>  <dd>Steals</dd>
                    <dt>BLK</dt> <dd>Blocks</dd>
                    <dt>PF</dt>  <dd>Personal Fouls</dd>
                    <dt>DD2</dt>  <dd>Double Doubles</dd>
                </div>
                <div class="col">
                    <dt>TD3</dt>  <dd>Triple Doubles</dd>
                    <dt>PTS</dt> <dd>Points</dd>
                    <dt>+/-</dt> <dd> Plus Minus</dd>
                </div>
            </dl>          

        </div>
    </div>
    <!--Table team 1-->
    <table id="boxteam1" class="table-sm stripe hover order-column my-4" style="width:100%; font-size: 12px;">
        <thead>
            <tr style="background-color: #0C54B8; color: white;">
                <th colspan="26">{{ tn1 }}</th>
            </tr>
            <tr id="hover" style="background-color:#052247; color: white;">
                <th style="text-align:left;">PLAYER</th>
                <th>MIN</th>
                <th>FGM</th>
                <th>FGA</th>
                <th>FG%</th>
                <th>3PM</th>
                <th>3PA</th>
                <th>3P%</th>
                <th>FTM</th>
                <th>FTA</th>
                <th>FT%</th>
                <th>OREB</th>
                <th>DREB</th>
                <th>REB</th>
                <th>AST</th>
                <th>TOV</th>
                <th>STL</th>
                <th>BLK</th>
                <th>PF</th>
                <th>PTS</th>
                <th>+/-</th>
            </tr>
        </thead>
    </table>
    <!--Table team 2-->
    <table id="boxteam2" class="table-sm stripe hover order-column" style="width:100%; font-size: 12px;">
        <thead>
            <tr style="background-color: #0C54B8; color: white;">
                <th colspan="26">{{ tn2 }}</th>
            </tr>
            <tr id="hover" style="background-color:#052247; color: white;">
                <th style="text-align:left;">PLAYER</th>
                <th>MIN</th>
                <th>FGM</th>
                <th>FGA</th>
                <th>FG%</th>
                <th>3PM</th>
                <th>3PA</th>
                <th>3P%</th>
                <th>FTM</th>
                <th>FTA</th>
                <th>FT%</th>
                <th>OREB</th>
                <th>DREB</th>
                <th>REB</th>
                <th>AST</th>
                <th>TOV</th>
                <th>STL</th>
                <th>BLK</th>
                <th>PF</th>
                <th>PTS</th>
                <th>+/-</th>
            </tr>
        </thead>
    </table>


</div>



        <!--SDataTables #boxteam1 & 2-->
        <script type="text/javascript">
            //Table team 1
            $(document).ready(function () {
                $('#boxteam1').dataTable( {
                    "info": false,
                    "paging": false,
                    "searching": false,
                    "processing": false,
                    "ajax": {
                        datatype: 'json',
                        url: '/gametable',
                        dataSrc: '0',
                        
                    },
                    "columns": [
        
                        { "data": "PLAYER_NAME" }, 
                        { "data": "MIN" , "defaultContent": "DNP" },                    
                        { "data": "FGM" },
                        { "data": "FGA" },
                        { "data": "FG_PCT", 
                            "render": function ( data, type, row ) {
                                if (data == null) {
                                    return '';
                                }
                                else {
                                    return (data * 100).toPrecision(3)
                                }
                            }
                        },
                        { "data": "FG3M" ,},
                        { "data": "FG3A" ,},
                        { "data": "FG3_PCT",
                            "render": function ( data, type, row ) {
                                if (data == null) {
                                    return '';
                                }
                                else {
                                    return (data * 100).toPrecision(3)
                                }
                            } 
                        },
                        { "data": "FTM" },
                        { "data": "FTA" },
                        { "data": "FT_PCT",
                            "render": function ( data, type, row ) {
                                if (data == null) {
                                    return '';
                                }
                                else {
                                    return (data * 100).toPrecision(3)
                                }
                            } 
                        },
                        { "data": "OREB" },
                        { "data": "DREB" },
                        { "data": "REB" },
                        { "data": "AST" },
                        { "data": "TO" },
                        { "data": "STL" },
                        { "data": "BLK" },
                        { "data": "PF" },
                        { "data": "PTS" },
                        { "data": "PLUS_MINUS" },
                        

                    ],
                    
                    "order": [[ 1, "desc" ]],
                    "columnDefs": [
                        { width: 100, targets: 0 },
                        { type: 'num-html', targets: '_all' },
                        { type: 'html', targets: 0 }
                    ],
                    
                });
                //Table team 2
                $('#boxteam2').dataTable( {
                    "info": false,
                    "paging": false,
                    "searching": false,
                    "processing": false,
                    "ajax": {
                        datatype: 'json',
                        url: '/gametable',
                        dataSrc: '1',
                        
                    },
                    "columns": [
        
                        { "data": "PLAYER_NAME" }, 
                        { "data": "MIN" , "defaultContent": "DNP" },                    
                        { "data": "FGM" },
                        { "data": "FGA" },
                        { "data": "FG_PCT", 
                            "render": function ( data, type, row ) {
                                if (data == null) {
                                    return '';
                                }
                                else {
                                    return (data * 100).toPrecision(3)
                                }
                            }
                        },
                        { "data": "FG3M" ,},
                        { "data": "FG3A" ,},
                        { "data": "FG3_PCT",
                            "render": function ( data, type, row ) {
                                if (data == null) {
                                    return '';
                                }
                                else {
                                    return (data * 100).toPrecision(3)
                                }
                            } 
                        },
                        { "data": "FTM" },
                        { "data": "FTA" },
                        { "data": "FT_PCT",
                            "render": function ( data, type, row ) {
                                if (data == null) {
                                    return '';
                                }
                                else {
                                    return (data * 100).toPrecision(3)
                                }
                            } 
                        },
                        { "data": "OREB" },
                        { "data": "DREB" },
                        { "data": "REB" },
                        { "data": "AST" },
                        { "data": "TO" },
                        { "data": "STL" },
                        { "data": "BLK" },
                        { "data": "PF" },
                        { "data": "PTS" },
                        { "data": "PLUS_MINUS" },
                        

                    ],
                    
                    "order": [[ 1, "desc" ]],
                    "columnDefs": [
                        { width: 100, targets: 0 },
                        { type: 'num-html', targets: '_all' },
                        { type: 'html', targets: 0 }
                    ],
                    
                });
                
            });
            //ajax post to /search on click, data from table row. Loads response on success
            $( document ).on("click", "tr[role='row']", function(){
            
                $.ajax({
                    url: '/search',
                    type: 'post',
                    data: {
                        q: $(this).children('td:first-child').text()
                    },
                    success: function(response){
                        $( "html" ).html( response );
                    }
                })
            });     
        </script>


{% endblock %}